<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Load Balancing Optimization Simulator</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1>Advanced Load Balancing Optimization Simulator</h1>
            <div class="simulation-status">
                <span class="status status--info" id="simulationStatus">Stopped</span>
                <div class="simulation-time">Time: <span id="simulationTimeHeader">0s</span></div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar Controls -->
            <aside class="sidebar">
                <!-- Algorithm Selection -->
                <div class="control-section">
                    <h3>Load Balancing Algorithm</h3>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="algorithm" value="roundRobin" checked>
                            <span class="radio-text">Round Robin</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="algorithm" value="leastLoad">
                            <span class="radio-text">Least Load</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="algorithm" value="weightedRoundRobin">
                            <span class="radio-text">Weighted Round Robin</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="algorithm" value="shortestResponseTime">
                            <span class="radio-text">Shortest Response Time</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="algorithm" value="randomized">
                            <span class="radio-text">Randomized Load Balancing</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="algorithm" value="consistentHashing">
                            <span class="radio-text">Consistent Hashing</span>
                        </label>
                    </div>
                    <p class="help-text" id="algorithmDescription">Distributes tasks sequentially across healthy servers in a circular manner</p>
                </div>

                <!-- Server Configuration -->
                <div class="control-section">
                    <h3>Server Configuration</h3>
                    <div class="form-group">
                        <label class="form-label" for="serverCount">Number of Servers (1-8)</label>
                        <input type="range" id="serverCount" class="range-input" min="1" max="8" value="5">
                        <span class="range-value" id="serverCountValue">5</span>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="serverCapacity">Server Capacity</label>
                        <input type="number" id="serverCapacity" class="form-control" value="100" min="50" max="200">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="serverFailureRate">Failure Rate (%)</label>
                        <input type="range" id="serverFailureRate" class="range-input" min="0" max="10" value="2" step="0.1">
                        <span class="range-value" id="serverFailureRateValue">2.0%</span>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="healthCheckInterval">Health Check Interval (s)</label>
                        <input type="range" id="healthCheckInterval" class="range-input" min="1" max="10" value="3">
                        <span class="range-value" id="healthCheckIntervalValue">3s</span>
                    </div>
                </div>

                <!-- Task Configuration -->
                <div class="control-section">
                    <h3>Task Configuration</h3>
                    <div class="form-group">
                        <label class="form-label" for="taskCount">Number of Tasks</label>
                        <input type="number" id="taskCount" class="form-control" value="100" min="10" max="500">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="arrivalRate">Arrival Rate (tasks/sec)</label>
                        <input type="range" id="arrivalRate" class="range-input" min="1" max="15" value="8">
                        <span class="range-value" id="arrivalRateValue">8</span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="processingTimeMin">Min Processing (ms)</label>
                            <input type="number" id="processingTimeMin" class="form-control" value="500" min="100" max="2000">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="processingTimeMax">Max Processing (ms)</label>
                            <input type="number" id="processingTimeMax" class="form-control" value="3000" min="1000" max="10000">
                        </div>
                    </div>
                    
                    <h4>Priority Distribution</h4>
                    <div class="priority-controls">
                        <div class="priority-control">
                            <label class="form-label">High Priority (%)</label>
                            <input type="range" id="highPriorityPercent" class="range-input" min="0" max="100" value="20">
                            <span class="range-value priority-high" id="highPriorityValue">20%</span>
                        </div>
                        <div class="priority-control">
                            <label class="form-label">Medium Priority (%)</label>
                            <input type="range" id="mediumPriorityPercent" class="range-input" min="0" max="100" value="50">
                            <span class="range-value priority-medium" id="mediumPriorityValue">50%</span>
                        </div>
                        <div class="priority-control">
                            <label class="form-label">Low Priority (%)</label>
                            <input type="range" id="lowPriorityPercent" class="range-input" min="0" max="100" value="30">
                            <span class="range-value priority-low" id="lowPriorityValue">30%</span>
                        </div>
                    </div>
                </div>

                <!-- Simulation Controls -->
                <div class="control-section">
                    <h3>Simulation Controls</h3>
                    <div class="button-group">
                        <button id="startBtn" class="btn btn--primary btn--full-width">Start Simulation</button>
                        <div class="button-row">
                            <button id="pauseBtn" class="btn btn--secondary" disabled>Pause</button>
                            <button id="resumeBtn" class="btn btn--secondary" disabled>Resume</button>
                            <button id="resetBtn" class="btn btn--outline">Reset</button>
                        </div>
                        <button id="stepBtn" class="btn btn--outline btn--full-width" disabled>Step Forward</button>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="simulationSpeed">Simulation Speed</label>
                        <select id="simulationSpeed" class="form-control">
                            <option value="slow">Slow (2s)</option>
                            <option value="normal" selected>Normal (1s)</option>
                            <option value="fast">Fast (0.5s)</option>
                            <option value="turbo">Turbo (0.1s)</option>
                        </select>
                    </div>
                </div>

                <!-- Server Control -->
                <div class="control-section">
                    <h3>Server Management</h3>
                    <button id="simulateFailureBtn" class="btn btn--outline btn--full-width">Simulate Random Failure</button>
                    <button id="recoverAllBtn" class="btn btn--outline btn--full-width">Recover All Servers</button>
                </div>

                <!-- Export Controls -->
                <div class="control-section">
                    <h3>Export & Analysis</h3>
                    <div class="button-group">
                        <button id="exportJsonBtn" class="btn btn--outline btn--full-width">Export JSON</button>
                        <button id="exportCsvBtn" class="btn btn--outline btn--full-width">Export CSV</button>
                        <button id="exportReportBtn" class="btn btn--outline btn--full-width">Performance Report</button>
                    </div>
                </div>
            </aside>

            <!-- Dashboard -->
            <main class="dashboard">
                <div class="progress-dashboard">
                    <div class="progress-overview">
                        <div class="circular-progress-container">
                            <div class="circular-progress" id="circularProgress">
                                <div class="progress-inner">
                                    <div class="progress-percentage" id="progressPercentage">0%</div>
                                    <div class="progress-label">Complete</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="progress-stats-grid">
                            <div class="task-status-card total">
                                <div class="task-icon">üìã</div>
                                <div class="task-info">
                                    <div class="task-count" id="totalTasks">0</div>
                                    <div class="task-label">Total Tasks</div>
                                </div>
                            </div>
                            
                            <div class="task-status-card pending">
                                <div class="task-icon">‚è≥</div>
                                <div class="task-info">
                                    <div class="task-count" id="pendingTasks">0</div>
                                    <div class="task-label">Pending</div>
                                </div>
                            </div>
                            
                            <div class="task-status-card in-progress">
                                <div class="task-icon">‚ö°</div>
                                <div class="task-info">
                                    <div class="task-count" id="inProgressTasks">0</div>
                                    <div class="task-label">In Progress</div>
                                </div>
                            </div>
                            
                            <div class="task-status-card completed">
                                <div class="task-icon">‚úÖ</div>
                                <div class="task-info">
                                    <div class="task-count" id="completedTasks">0</div>
                                    <div class="task-label">Completed</div>
                                </div>
                            </div>
                            
                            <div class="task-status-card failed">
                                <div class="task-icon">‚ùå</div>
                                <div class="task-info">
                                    <div class="task-count" id="failedTasks">0</div>
                                    <div class="task-label">Failed</div>
                                </div>
                            </div>
                            
                            <div class="task-status-card rate">
                                <div class="task-icon">üìà</div>
                                <div class="task-info">
                                    <div class="task-count" id="completionRate">0.0</div>
                                    <div class="task-label">Tasks/sec</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="progress-bar-container">
                        <div class="progress-bar-header">
                            <h4>Task Completion Progress</h4>
                            <div class="eta-container">
                                <span class="eta-label">ETA:</span>
                                <span class="eta-value" id="etaValue">--</span>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                            <div class="progress-text" id="progressText">0% (0/0)</div>
                        </div>
                    </div>
                </div>
                <!-- Server Health Status -->
                <div class="server-health-section">
                    <div class="chart-header">
                        <h3>Server Health Status</h3>
                    </div>
                    <div class="server-grid" id="serverGrid">
                        <!-- Server status cards will be populated here -->
                    </div>
                </div>

                <!-- Advanced Metrics -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h4>Average Response Time</h4>
                        <div class="metric-value" id="avgResponseTime">0.0s</div>
                        <div class="metric-subtext">
                            <span class="metric-label">50th: </span><span id="responseTime50th">0.0s</span><br>
                            <span class="metric-label">95th: </span><span id="responseTime95th">0.0s</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <h4>SLA Compliance</h4>
                        <div class="metric-value" id="slaCompliance">100%</div>
                        <div class="metric-subtext">
                            <span class="priority-high">High: </span><span id="slaHigh">100%</span><br>
                            <span class="priority-medium">Med: </span><span id="slaMedium">100%</span>
                        </div>
                    </div>
                    <div class="metric-card">
                        <h4>Throughput</h4>
                        <div class="metric-value" id="throughput">0.0</div>
                        <div class="metric-label">Tasks/sec</div>
                    </div>
                    <div class="metric-card">
                        <h4>Failure Rate</h4>
                        <div class="metric-value" id="failureRate">0%</div>
                        <div class="metric-label">Failed Tasks</div>
                    </div>
                    <div class="metric-card">
                        <h4>Server Availability</h4>
                        <div class="metric-value" id="serverAvailability">100%</div>
                        <div class="metric-label">Average Uptime</div>
                    </div>
                    <div class="metric-card">
                        <h4>Load Variance</h4>
                        <div class="metric-value" id="loadVariance">0.0</div>
                        <div class="metric-label">Standard Deviation</div>
                    </div>
                    <div class="metric-card">
                        <h4>Queue Depth</h4>
                        <div class="metric-value" id="queueDepth">0.0</div>
                        <div class="metric-label">Average</div>
                    </div>
                    <div class="metric-card">
                        <h4>Jitter</h4>
                        <div class="metric-value" id="jitter">0.0ms</div>
                        <div class="metric-label">Response Variance</div>
                    </div>
                </div>

                <!-- Visualization Area -->
                <div class="charts-container">
                    <div class="chart-section">
                        <div class="chart-header">
                            <h3>Server Load Distribution & Health</h3>
                        </div>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="serverLoadChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-section">
                        <div class="chart-header">
                            <h3>Performance Metrics Over Time</h3>
                        </div>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-section">
                        <div class="chart-header">
                            <h3>Priority Queue Status</h3>
                        </div>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="priorityQueueChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-section">
                        <div class="chart-header">
                            <h3>SLA Compliance by Priority</h3>
                        </div>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="slaComplianceChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Task Log -->
                <div class="task-log-section">
                    <div class="chart-header">
                        <h3>System Event Log</h3>
                        <button id="clearLogBtn" class="btn btn--sm btn--outline">Clear Log</button>
                    </div>
                    <div class="task-log" id="taskLog">
                        <div class="log-entry">Advanced Load Balancing Simulator initialized. Configure parameters and start simulation.</div>
                    </div>
                </div>

                <!-- Algorithm Comparison -->
                <div class="comparison-section" style="display: none;" id="comparisonSection">
                    <div class="chart-header">
                        <h3>Algorithm Performance Comparison</h3>
                        <button id="runComparisonBtn" class="btn btn--primary">Run Comprehensive Comparison</button>
                    </div>
                    <div class="comparison-table">
                        <table id="comparisonTable">
                            <thead>
                                <tr>
                                    <th>Algorithm</th>
                                    <th>Avg Response Time</th>
                                    <th>SLA Compliance</th>
                                    <th>Throughput</th>
                                    <th>Failure Rate</th>
                                    <th>Load Variance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Comparison results will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>